{
  "id": "trik-article-search",
  "name": "Article Search",
  "description": "Searches for articles on a given topic. Demonstrates type-directed privilege separation with session support.",
  "version": "1.0.1",

  "actions": {
    "search": {
      "description": "Search for articles by topic",
      "responseMode": "template",

      "inputSchema": {
        "type": "object",
        "properties": {
          "topic": { "type": "string", "minLength": 1 }
        },
        "required": ["topic"]
      },

      "agentDataSchema": {
        "type": "object",
        "properties": {
          "template": {
            "type": "string",
            "enum": ["success", "empty", "error"],
            "description": "Which response template to use"
          },
          "count": {
            "type": "integer",
            "description": "Number of articles found"
          },
          "topic": {
            "type": "string",
            "enum": ["AI", "technology", "science", "health", "business", "other"],
            "description": "Normalized topic category"
          },
          "articleIds": {
            "type": "array",
            "items": { "type": "string", "format": "id" },
            "description": "IDs of found articles"
          }
        },
        "required": ["template"]
      },

      "responseTemplates": {
        "success": { "text": "I found {{count}} articles about {{topic}}." },
        "empty": { "text": "I couldn't find any articles about {{topic}}." },
        "error": { "text": "Something went wrong while searching." }
      }
    },

    "details": {
      "description": "Get details for an article. Can use article ID or natural language reference like 'the healthcare one'.",
      "responseMode": "passthrough",

      "inputSchema": {
        "type": "object",
        "properties": {
          "articleId": { "type": "string", "description": "Direct article ID" },
          "reference": { "type": "string", "description": "Natural language reference like 'the healthcare one' or 'the third article'" }
        }
      },

      "userContentSchema": {
        "type": "object",
        "properties": {
          "contentType": {
            "type": "string",
            "enum": ["article"],
            "description": "Type of content for passthrough delivery"
          },
          "content": {
            "type": "string",
            "description": "The full article content"
          },
          "metadata": {
            "type": "object",
            "properties": {
              "title": { "type": "string" },
              "articleId": { "type": "string" }
            },
            "description": "Safe metadata the agent can see"
          }
        },
        "required": ["contentType", "content"]
      },

      "agentDataSchema": {
        "type": "object",
        "properties": {
          "template": {
            "type": "string",
            "enum": ["not_found", "error"],
            "description": "Template for error cases (runtime override)"
          }
        }
      },

      "responseTemplates": {
        "not_found": { "text": "I couldn't find that article. Try searching first or being more specific." },
        "error": { "text": "Something went wrong while getting the article details." }
      }
    },

    "list": {
      "description": "List article titles and summaries. Uses articleIds if provided, otherwise uses the last search results from session.",
      "responseMode": "passthrough",

      "inputSchema": {
        "type": "object",
        "properties": {
          "articleIds": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Optional list of article IDs to show. If omitted, uses last search results."
          }
        }
      },

      "userContentSchema": {
        "type": "object",
        "properties": {
          "contentType": {
            "type": "string",
            "enum": ["article-list"],
            "description": "Type of content for passthrough delivery"
          },
          "content": {
            "type": "string",
            "description": "Formatted list of article titles and summaries"
          },
          "metadata": {
            "type": "object",
            "properties": {
              "count": { "type": "integer" }
            },
            "description": "Safe metadata the agent can see"
          }
        },
        "required": ["contentType", "content"]
      },

      "agentDataSchema": {
        "type": "object",
        "properties": {
          "template": {
            "type": "string",
            "enum": ["no_articles", "error"],
            "description": "Template for error cases (runtime override)"
          }
        }
      },

      "responseTemplates": {
        "no_articles": { "text": "No articles to list. Try searching for a topic first." },
        "error": { "text": "Something went wrong while listing articles." }
      }
    }
  },

  "capabilities": {
    "tools": [],
    "canRequestClarification": false,
    "session": {
      "enabled": true,
      "maxDurationMs": 1800000,
      "maxHistoryEntries": 10
    }
  },

  "limits": {
    "maxExecutionTimeMs": 5000,
    "maxLlmCalls": 0,
    "maxToolCalls": 0
  },

  "entry": {
    "module": "./graph.js",
    "export": "default"
  }
}
